<!DOCTYPE html>
<html>

<head>

    <title>The Greenhouse App</title>
    <link href="new.css" rel="stylesheet" type="text/css" />
    <link href="grid.css" rel="stylesheet" type="text/css" />
    <link href="images.css" rel="stylesheet" type="text/css" />

    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script type="text/javascript">
    $(document).ready(function () //.ready make a function available after the document is loaded
    {
        GetAvg();
    });

    //get average temperature based on the last 200 readings and 
    function GetAvg() {
        var url = 'https://api.thingspeak.com/channels/1587029/feeds.json?results=120&average=60';
        $.ajax //use jquery ajax method to request json from a remote server. allows web pages to be updated asynchronously by exchanging small amounts of data with the server behind the scenes. No need to refresh page each time
            ({
                url: url,
                type: 'GET',
                contentType: "application/json",
                success: function (data, textStatus, xhr) {
                    $.each(data, function (i, item) {
                        if (i == 'feeds') {
                            var ubound = item.length;
                            $('#tempAvg').val(item[ubound - 1].field1);
                            $('#humidAvg').val(item[ubound - 1].field2);
                            $('#pressureAvg').val(item[ubound - 1].field3);
                        }            
                    });
                },
                error: function (xhr, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
        setTimeout(GetData, 5000);
    }

</script>
</head>

<body>

    <header>
        <nav>
            <div class="nav">
                <ul>
                    <li class="logo"><a href="index.html">App Home</a></li>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="data.html">Data</a></li>
                    <li><a href="camera.html">Camera</a></li>
                    <li>Pricing</li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="largeImage" id="topImagePricing">
        <h1>Pricing</h1>
    </div>

    <div class="row">
		<h1>Average Reading</h1>
        <div>
		<div class="col" id="membershipHome">
                <table>
                    <tr>
                        <th>Data Source</th>
                        <th>Average Reading</th>
                    <tr>
                        <td>ID:</td>
                        <td><input id="id1" type="text" /></td>
                    </tr>
    
                    <tr>
                        <td>Temperature:</td>
                        <td><input id="tempAvg" type="text" /></td>
                    </tr>
                    <tr>
                        <td>Humidity:</td>
                        <td><input id="humidAvg" type="text" /></td>
                    </tr>
                    <tr>
                        <td>Pressure:</td>
                        <td><input id="pressureAvg" type="text" /></td>
                    </tr>
                </table>
		</div>

		<div class="col" id="membershipHome">
			<a href="pricing.html">
				<h3>6 Months</h3>
			</a>
			<p>Avail of our 6 month memebership package and get full access to our gym and sauna facilities, along with
				free entry to our classes</p>
		</div>

		<div class="col" id="membershipHome">
			<a href="pricing.html">
				<h3>3 Months</h3>
			</a>
			<p>Sign up to our 3 month memberhsip package that gives you full and unlimited access to all of our gym
				facilities</p>
		</div>
	</div>


    <footer>
        <div id="footer">
            <ul><a href="privacy.html">Privacy Policy</a></ul>
            <ul>Terms & Conditions</ul>
            <ul><a href="camera.html">Camera</a></ul>
        </div>
    </footer>
</body>

</html>